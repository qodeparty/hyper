#!/bin/bash
#
#
PID=$$
stty -ctlecho #hide ctrl-c echo

source ./bin/hyper-util
trap "exitfn $PID" INT

DIR="${BASH_SOURCE%/*}"




prompt="$clear_eol$cyan(λ) > $clear_eol$white"

logo="$(cat $DIR/hyper.log)"

echo "$cyan$logo$clear_eol";
#echo $PID

function getShell() {
  read -p "$prompt" COMMAND
  printf "$grey"
  arrCommand=(${COMMAND// / })

  for i in "${arrCommand[@]}"; do
    echo "arg => $i"
  done

  printf "$yellow"
  case "$COMMAND" in
    pid|p*)
      echo $PID

      ;;
    ?|help|h*)
      echo pid help test config

      ;;
    clear|cl*)
      clear
      echo "$cyan$logo$clear_eol";
      ;;
    conf|co*)
      echo 'config'
      $DIR/hypercmd config .hyper
      ;;
    status|st*)
      echo 'status'
      $DIR/hypercmd status
      ;;
    rev)
      local LOCALREV=$(git rev-list HEAD | wc -l | tr -d ' ');
      echo $LOCALREV

      ;;
    f|F)
      grouptoaddto="girls"
      return 0
      ;;
    *)
      #printf %s\\n "Please enter 'M' or 'F'"
      return 1
      ;;
  esac
  return 1
}

printf "$clear_eol"

until getShell; do : ; done
echo "$cyanλ$clear_eol Done.";

